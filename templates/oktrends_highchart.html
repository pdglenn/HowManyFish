<!DOCTYPE html>
<head>
    <meta charset="UTF-8" />
    <title>How Many Fish?</title>
    
    <!-- Create a link to the main.css stylesheet -->
    <link rel="stylesheet" href="_css/main.css" type="text/css" />
    <!-- Create a link to the font family -->
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans" />
    <!-- Create a link to bootstrap -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css" /> 

    <!-- Create a link to highcharts -->
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/heatmap.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

    <!-- Create a link to jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

</head>

<body>

  <div id="raceprefchart_1"></div>
  <div id="raceprefchart_2"></div>

<script>

    $(function () {

      Highcharts.setOptions({
        chart: {
            style: {
                fontFamily: 'Open Sans'
            }
        }
      });

      var chart1 = new Highcharts.Chart({
     // $('#raceprefchart').highcharts({
          
          chart: {
              type: 'heatmap',
              renderTo: 'raceprefchart_1',
              marginTop: 40,
              marginBottom: 40,
          },


          title: {
              text: 'Men Rating Women on OKCupid'
          },

          xAxis: {
              categories: ['Asian women', 'Black women', 'Latina women', 'White women']
          },

          yAxis: {
              categories: ['White men rate', 'Latino men rate', 'Black men rate', 'Asian men rate'],
              title: null
          },

          colorAxis: {
              // minColor: '#D30C7B',
              // maxColor: '#20BF55',
              reversed: false,
              stops: [
                    [0, '#D30C7B'],
                    [.5, '#FFFFFF'],
                    [1, '#20BF55']
                    ],
              min: -30,
              max: 30
          },

          legend: {
              align: 'right',
              layout: 'vertical',
              margin: 0,
              verticalAlign: 'top',
              y: 25,
              symbolHeight: 320
          },

          tooltip: {
              formatter: function () {
                if (this.point.value >=0){
                  return this.series.yAxis.categories[this.point.y] + ' ' + this.series.xAxis.categories[this.point.x] + ' <b>' + this.point.value + '</b>% more attractive than the average woman';
                } else {
                  return this.series.yAxis.categories[this.point.y] + ' ' + this.series.xAxis.categories[this.point.x] + ' <b>' + -this.point.value + '</b>% less attractive than the average woman';
                };
              }
          },

          series: [{
              name: 'Ratings by race',
              borderWidth: 1,
              data: [[0,0,9],[0,1,4],[0,2,2],[0,3,15],
                    [1,0,-17],[1,1,-18],[1,2,1],[1,3,-20],
                    [2,0,3],[2,1,10],[2,2,2],[2,3,2],
                    [3,0,6],[3,1,4],[3,2,-6],[3,3,3]],
              dataLabels: {
                  enabled: true,
                  color: 'black',
                  style: {
                      textShadow: 'none'
                  },
                  formatter: function() {
                    return this.point.value + '%';
                  }
              }
          }]
        });

      var chart2 = new Highcharts.Chart({
     // $('#raceprefchart').highcharts({
          
          chart: {
              type: 'heatmap',
              renderTo: 'raceprefchart_2',
              marginTop: 40,
              marginBottom: 40
          },


          title: {
              text: 'Women Rating Men on OKCupid'
          },

          xAxis: {
              categories: ['Asian men', 'Black men', 'Latino men', 'White men']
          },

          yAxis: {
              categories: ['White women rate', 'Latina women rate', 'Black women rate', 'Asian women rate'],
              title: null
          },

          colorAxis: {
              reversed: false,
              stops: [
                    [0, '#D30C7B'],
                    [.5, '#FFFFFF'],
                    [1, '#20BF55']
                    ],
              min: -30,
              max: 30
          },

          legend: {
              align: 'right',
              layout: 'vertical',
              reversed: true,
              margin: 0,
              verticalAlign: 'top',
              y: 25,
              symbolHeight: 320
          },

          tooltip: {
              formatter: function () {
                if (this.point.value >=0){
                  return this.series.yAxis.categories[this.point.y] + ' ' + this.series.xAxis.categories[this.point.x] + ' <b>' + this.point.value + '</b>% more attractive than the average man';
                } else {
                  return this.series.yAxis.categories[this.point.y] + ' ' + this.series.xAxis.categories[this.point.x] + ' <b>' + -this.point.value + '</b>% less attractive than the average man';
                };
              }
          },

          series: [{
              name: 'Ratings by race',
              borderWidth: 1,
              data: [[0,0,-12],[0,1,-14],[0,2,-13],[0,3,24],
                    [1,0,-8],[1,1,-16],[1,2,23],[1,3,-27],
                    [2,0,1],[2,1,18],[2,2,-3],[2,3,-15],
                    [3,0,19],[3,1,12],[3,2,-6],[3,3,18]],
              dataLabels: {
                  enabled: true,
                  color: 'black',
                  style: {
                      textShadow: 'none'
                  },
                  formatter: function() {
                    return this.point.value + '%';
                  }
              }
          }]
        });

      });
  </script>

</body>

</html>